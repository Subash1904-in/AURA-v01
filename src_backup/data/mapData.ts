import { FloorPlan, MapNode, MapEdge, MapPolygon } from '../types';

const rectToPolygon = (rect: {x: number, y: number, width: number, height: number}): {x: number, y: number}[] => {
    const { x, y, width, height } = rect;
    return [
        { x, y },
        { x: x + width, y },
        { x: x + width, y: y + height },
        { x, y: y + height },
    ];
};

const COLORS = {
  BUILDING: { top: '#e0e7ff', wall: '#c7d2fe', stroke: '#eef2ff' },
  LAB: { top: '#fef3c7', wall: '#fde68a', stroke: '#fef9c3' },
  ROOM: { top: '#d1fae5', wall: '#a7f3d0', stroke: '#f0fdf4' },
  LIFT: { top: '#fefce8', wall: '#fef08a', stroke: '#fef9c3' },
  STAIRS: { top: '#e5e7eb', wall: '#d1d5db', stroke: '#f3f4f6' },
  CORRIDOR: { top: '#e0e7ff', wall: '#c7d2fe', stroke: '#eef2ff' },
  UTILITY: { top: '#fee2e2', wall: '#fca5a5', stroke: '#fef2f2'},
  SPECIAL: { top: '#fed7aa', wall: '#fb923c', stroke: '#ffedd5' }, // Library, Seminar Hall
  GROUND: { top: '#e0f2fe', wall: '#e0f2fe', stroke: '#e0f2fe' },
  ROAD: { top: '#d1d5db', wall: '#d1d5db', stroke: '#d1d5db' },
  SPACE: { top: '#dcfce7', wall: '#dcfce7', stroke: '#dcfce7' },
}

const commonGeometry: MapPolygon[] = [
    { id: 'campus-ground', points: rectToPolygon({x: 0, y: 0, width: 1200, height: 2200}), type: 'ground', color: COLORS.GROUND },
    { id: 'campus-road', points: rectToPolygon({x: 100, y: 2000, width: 1000, height: 100}), type: 'road', color: COLORS.ROAD, label: 'ROAD' },
]

export const floorPlans: Record<string, FloorPlan> = {
  basement: {
    id: 'basement', name: 'Basement 2', level: -2, viewBox: '0 0 1200 2200',
    geometry: [ ...commonGeometry,
      {id: 'b-main', points: rectToPolygon({x:200, y:200, width:800, height:1800}), type: 'building', color: COLORS.BUILDING},
      {id: 'b-corridor', points: rectToPolygon({x:550, y:300, width:100, height:1600}), type: 'corridor', color: COLORS.CORRIDOR},
      {id: 'b-lift', points: rectToPolygon({x:565, y:1000, width:70, height:70}), type: 'lift', label: 'L', nodeId: 'LIFT_B2', color: COLORS.LIFT},
      {id: 'b-stairs-n', points: rectToPolygon({x:250, y:250, width:250, height:80}), type: 'stairs', label: 'Stairs', nodeId: 'STAIRS_N_B2', color: COLORS.STAIRS},
      {id: 'b-stairs-s', points: rectToPolygon({x:700, y:1850, width:250, height:80}), type: 'stairs', label: 'Stairs', nodeId: 'STAIRS_S_B2', color: COLORS.STAIRS},
      {id: 'b-br', points: rectToPolygon({x:350, y:1080, width:150, height:80}), type: 'utility', label: 'BR', nodeId: 'B014', color: COLORS.UTILITY },
      {id: 'b-gr', points: rectToPolygon({x:350, y:820, width:150, height:80}), type: 'utility', label: 'GR', nodeId: 'B015', color: COLORS.UTILITY },
      {id: 'b018', points: rectToPolygon({x:350, y:350, width:150, height:150}), type: 'lab', label: 'B018', nodeId: 'B018', color: COLORS.LAB},
      {id: 'b017', points: rectToPolygon({x:350, y:510, width:150, height:150}), type: 'lab', label: 'B017', nodeId: 'B017', color: COLORS.LAB},
      {id: 'b016', points: rectToPolygon({x:350, y:670, width:150, height:140}), type: 'lab', label: 'B016', nodeId: 'B016', color: COLORS.LAB},
      {id: 'b013', points: rectToPolygon({x:350, y:1170, width:150, height:250}), type: 'lab', label: 'B013', nodeId: 'B013', color: COLORS.LAB},
      {id: 'b012', points: rectToPolygon({x:350, y:1430, width:150, height:250}), type: 'lab', label: 'B012', nodeId: 'B012', color: COLORS.LAB},
      {id: 'b011', points: rectToPolygon({x:350, y:1690, width:150, height:150}), type: 'lab', label: 'B011', nodeId: 'B011', color: COLORS.LAB},
      {id: 'b009', points: rectToPolygon({x:700, y:450, width:250, height:150}), type: 'lab', label: 'B009', nodeId: 'B009', color: COLORS.LAB},
      {id: 'b008', points: rectToPolygon({x:700, y:610, width:250, height:200}), type: 'lab', label: 'B008', nodeId: 'B008', color: COLORS.LAB},
      {id: 'b007', points: rectToPolygon({x:700, y:1100, width:250, height:200}), type: 'room', label: 'B007', nodeId: 'B007', color: COLORS.ROOM},
      {id: 'b006', points: rectToPolygon({x:700, y:1310, width:250, height:200}), type: 'lab', label: 'B006', nodeId: 'B006', color: COLORS.LAB},
      {id: 'b005', points: rectToPolygon({x:700, y:350, width:250, height:90}), type: 'lab', label: 'B005', nodeId: 'B005', color: COLORS.LAB},
      {id: 'b004', points: rectToPolygon({x:700, y:820, width:250, height:130}), type: 'lab', label: 'B004', nodeId: 'B004', color: COLORS.LAB},
      {id: 'b003', points: rectToPolygon({x:700, y:960, width:250, height:130}), type: 'lab', label: 'B003', nodeId: 'B003', color: COLORS.LAB},
      {id: 'b002', points: rectToPolygon({x:700, y:1520, width:250, height:170}), type: 'lab', label: 'B002', nodeId: 'B002', color: COLORS.LAB},
      {id: 'b001', points: rectToPolygon({x:700, y:1700, width:250, height:140}), type: 'lab', label: 'B001', nodeId: 'B001', color: COLORS.LAB},
    ],
  },
  first: {
    id: 'first', name: 'Basement 1', level: -1, viewBox: '0 0 1200 2200',
    geometry: [ ...commonGeometry,
        {id: 'f1-main', points: rectToPolygon({x:200, y:200, width:800, height:1800}), type: 'building', color: COLORS.BUILDING},
        {id: 'f1-corridor', points: rectToPolygon({x:550, y:300, width:100, height:1600}), type: 'corridor', color: COLORS.CORRIDOR},
        {id: 'f1-lift', points: rectToPolygon({x:565, y:1000, width:70, height:70}), type: 'lift', label: 'L', nodeId: 'LIFT_B1', color: COLORS.LIFT},
        {id: 'f1-stairs-n', points: rectToPolygon({x:250, y:250, width:250, height:80}), type: 'stairs', label: 'Stairs', nodeId: 'STAIRS_N_B1', color: COLORS.STAIRS},
        {id: 'f1-stairs-s', points: rectToPolygon({x:700, y:1850, width:250, height:80}), type: 'stairs', label: 'Stairs', nodeId: 'STAIRS_S_B1', color: COLORS.STAIRS},
        {id: 'b121', points: rectToPolygon({x:250, y:350, width:250, height:150}), type: 'lab', label: 'B121', nodeId: 'B121', color: COLORS.LAB},
        {id: 'b120', points: rectToPolygon({x:250, y:510, width:250, height:150}), type: 'lab', label: 'B120', nodeId: 'B120', color: COLORS.LAB},
        {id: 'b119', points: rectToPolygon({x:250, y:670, width:250, height:150}), type: 'lab', label: 'B119', nodeId: 'B119', color: COLORS.LAB},
        {id: 'b118-gw', points: rectToPolygon({x:350, y:830, width:150, height:80}), type: 'utility', label: 'GW', nodeId: 'B118', color: COLORS.UTILITY },
        {id: 'b117-bw', points: rectToPolygon({x:350, y:920, width:150, height:80}), type: 'utility', label: 'BW', nodeId: 'B117', color: COLORS.UTILITY },
        {id: 'b116', points: rectToPolygon({x:350, y:1010, width:150, height:200}), type: 'office', label: 'HOD/Office\nB116', nodeId: 'B116', color: COLORS.ROOM},
        {id: 'b115', points: rectToPolygon({x:350, y:1220, width:150, height:440}), type: 'office', label: 'Staff Room\nB115', nodeId: 'B115', color: COLORS.ROOM},
        {id: 'b114', points: rectToPolygon({x:350, y:1670, width:150, height:170}), type: 'room', label: 'Reading\nRoom\nB114', nodeId: 'B114', color: COLORS.ROOM},
        {id: 'b113', points: rectToPolygon({x:700, y:350, width:250, height:150}), type: 'lab', label: 'B113', nodeId: 'B113', color: COLORS.LAB},
        {id: 'b112', points: rectToPolygon({x:700, y:510, width:250, height:150}), type: 'lab', label: 'B112', nodeId: 'B112', color: COLORS.LAB},
        {id: 'b111', points: rectToPolygon({x:700, y:670, width:250, height:150}), type: 'room', label: 'B111', nodeId: 'B111', color: COLORS.ROOM},
        {id: 'b110', points: rectToPolygon({x:700, y:1200, width:250, height:150}), type: 'room', label: 'B110', nodeId: 'B110', color: COLORS.ROOM},
        {id: 'b109', points: rectToPolygon({x:700, y:1360, width:250, height:150}), type: 'lab', label: 'B109', nodeId: 'B109', color: COLORS.LAB},
        {id: 'b107', points: rectToPolygon({x:700, y:350, width:250, height:150}), type: 'room', label: 'B107', nodeId: 'B107', color: COLORS.ROOM},
        {id: 'b106', points: rectToPolygon({x:700, y:510, width:250, height:150}), type: 'room', label: 'B106', nodeId: 'B106', color: COLORS.ROOM},
        {id: 'b105', points: rectToPolygon({x:700, y:670, width:250, height:150}), type: 'room', label: 'B105', nodeId: 'B105', color: COLORS.ROOM},
        {id: 'b104', points: rectToPolygon({x:700, y:1040, width:250, height:150}), type: 'room', label: 'B104', nodeId: 'B104', color: COLORS.ROOM},
        {id: 'b103', points: rectToPolygon({x:700, y:1200, width:250, height:150}), type: 'room', label: 'B103', nodeId: 'B103', color: COLORS.ROOM},
        {id: 'b102', points: rectToPolygon({x:700, y:1520, width:250, height:150}), type: 'room', label: 'B102', nodeId: 'B102', color: COLORS.ROOM},
        {id: 'b101', points: rectToPolygon({x:700, y:1680, width:250, height:160}), type: 'lab', label: 'B101', nodeId: 'B101', color: COLORS.LAB},
    ],
  },
  second: {
    id: 'second', name: 'Ground Floor', level: 0, viewBox: '0 0 1200 2200',
    geometry: [ ...commonGeometry,
      {id: 'f2-main', points: rectToPolygon({x:200, y:200, width:800, height:1800}), type: 'building', color: COLORS.BUILDING},
      {id: 'f2-corridor', points: rectToPolygon({x:550, y:300, width:100, height:1600}), type: 'corridor', color: COLORS.CORRIDOR},
      {id: 'f2-lift', points: rectToPolygon({x:565, y:1000, width:70, height:70}), type: 'lift', label: 'L', nodeId: 'LIFT_G', color: COLORS.LIFT},
      {id: 'f2-stairs-n', points: rectToPolygon({x:250, y:250, width:250, height:80}), type: 'stairs', label: 'Stairs', nodeId: 'STAIRS_N_G', color: COLORS.STAIRS},
      {id: 'f2-stairs-s', points: rectToPolygon({x:700, y:1850, width:250, height:80}), type: 'stairs', label: 'Stairs', nodeId: 'STAIRS_S_G', color: COLORS.STAIRS},
      {id: 'f2-entrance', points: rectToPolygon({x:450, y:1900, width:300, height:100}), type: 'entrance', label: 'ENTRANCE\n(Reception)', nodeId: 'ENTRANCE', color: COLORS.ROOM},
      {id: 'b215', points: rectToPolygon({x:250, y:350, width:250, height:150}), type: 'lab', label: 'B215', nodeId: 'B215', color: COLORS.LAB},
      {id: 'b214', points: rectToPolygon({x:250, y:510, width:250, height:150}), type: 'lab', label: 'B214', nodeId: 'B214', color: COLORS.LAB},
      {id: 'b218-poly', points: rectToPolygon({x:350, y:670, width:150, height:75}), type: 'room', label: 'B218', nodeId: 'B218', color: COLORS.ROOM},
      {id: 'b219-poly', points: rectToPolygon({x:350, y:750, width:150, height:75}), type: 'room', label: 'B219', nodeId: 'B219', color: COLORS.ROOM},
      {id: 'b213-gw', points: rectToPolygon({x:350, y:830, width:150, height:80}), type: 'utility', label: 'GW', nodeId: 'B213', color: COLORS.UTILITY },
      {id: 'b212-bw', points: rectToPolygon({x:350, y:920, width:150, height:80}), type: 'utility', label: 'BW', nodeId: 'B212', color: COLORS.UTILITY },
      {id: 'b211a', points: rectToPolygon({x:350, y:1010, width:150, height:100}), type: 'office', label: 'B211A', nodeId: 'B211A', color: COLORS.ROOM},
      {id: 'b211', points: rectToPolygon({x:350, y:1120, width:150, height:200}), type: 'office', label: 'B211', nodeId: 'B211', color: COLORS.ROOM},
      {id: 'b210', points: rectToPolygon({x:700, y:1330, width:250, height:100}), type: 'special', label: 'B210', nodeId: 'B210', color: COLORS.SPECIAL},
      {id: 'b208', points: rectToPolygon({x:350, y:1330, width:150, height:510}), type: 'special', label: 'Alpha Delta\nSeminar Hall\nB208', nodeId: 'B208', color: COLORS.SPECIAL},
      {id: 'b217', points: rectToPolygon({x:700, y:350, width:250, height:150}), type: 'lab', label: 'B217', nodeId: 'B217', color: COLORS.LAB},
      {id: 'b216', points: rectToPolygon({x:700, y:510, width:250, height:150}), type: 'office', label: 'B216/\nB216b', nodeId: 'B216', color: COLORS.ROOM},
      {id: 'b209', points: rectToPolygon({x:700, y:1170, width:250, height:150}), type: 'room', label: 'B209', nodeId: 'B209', color: COLORS.ROOM},
      {id: 'b207', points: rectToPolygon({x:700, y:350, width:250, height:150}), type: 'lab', label: 'B207', nodeId: 'B207', color: COLORS.LAB},
      {id: 'b206', points: rectToPolygon({x:700, y:510, width:250, height:150}), type: 'lab', label: 'B206', nodeId: 'B206', color: COLORS.LAB},
      {id: 'b205', points: rectToPolygon({x:700, y:860, width:250, height:130}), type: 'lab', label: 'B205', nodeId: 'B205', color: COLORS.LAB},
      {id: 'b203', points: rectToPolygon({x:700, y:1000, width:250, height:160}), type: 'room', label: 'B203', nodeId: 'B203', color: COLORS.ROOM},
      {id: 'b202', points: rectToPolygon({x:700, y:1440, width:250, height:190}), type: 'room', label: 'B202', nodeId: 'B202', color: COLORS.ROOM},
      {id: 'b201', points: rectToPolygon({x:700, y:1640, width:250, height:200}), type: 'room', label: 'B201', nodeId: 'B201', color: COLORS.ROOM},
      {id: 'canteen-poly', points: rectToPolygon({x:700, y:670, width:250, height:180}), type: 'special', label: 'Canteen', nodeId: 'CANTEEN', color: COLORS.SPECIAL},
      {id: 'lawn2', points: rectToPolygon({x:700, y:1000, width:250, height:0}), type: 'space', label: 'Lawn', color: COLORS.SPACE}, // Placeholder
    ],
  },
  third: {
    id: 'third', name: 'First Floor', level: 1, viewBox: '0 0 1200 2200',
    geometry: [ ...commonGeometry,
      {id: 'f3-main', points: rectToPolygon({x:200, y:200, width:800, height:1800}), type: 'building', color: COLORS.BUILDING},
      {id: 'f3-corridor', points: rectToPolygon({x:550, y:300, width:100, height:1600}), type: 'corridor', color: COLORS.CORRIDOR},
      {id: 'f3-lift', points: rectToPolygon({x:565, y:1000, width:70, height:70}), type: 'lift', label: 'L', nodeId: 'LIFT_F1', color: COLORS.LIFT},
      {id: 'f3-stairs-n', points: rectToPolygon({x:250, y:250, width:250, height:80}), type: 'stairs', label: 'Stairs', nodeId: 'STAIRS_N_F1', color: COLORS.STAIRS},
      {id: 'f3-stairs-s', points: rectToPolygon({x:700, y:1850, width:250, height:80}), type: 'stairs', label: 'Stairs', nodeId: 'STAIRS_S_F1', color: COLORS.STAIRS},
      {id: 'library', points: rectToPolygon({x:250, y:450, width:250, height:500}), type: 'special', label: 'Library', nodeId: 'B313', color: COLORS.SPECIAL},
      {id: 'digital-library', points: rectToPolygon({x:700, y:350, width:250, height:150}), type: 'special', label: 'Digital Library\n(B314)', nodeId: 'B314', color: COLORS.SPECIAL},
      {id: 'study-area', points: rectToPolygon({x:700, y:510, width:250, height:200}), type: 'room', label: 'Study Area', nodeId: 'STUDY_AREA', color: COLORS.ROOM},
      {id: 'b312', points: rectToPolygon({x:350, y:670, width:150, height:150}), type: 'office', label: 'B312', nodeId: 'B312', color: COLORS.ROOM},
      {id: 'b311-gw', points: rectToPolygon({x:350, y:830, width:150, height:80}), type: 'utility', label: 'GW', nodeId: 'B311', color: COLORS.UTILITY },
      {id: 'b310-bw', points: rectToPolygon({x:350, y:920, width:150, height:80}), type: 'utility', label: 'BW', nodeId: 'B310', color: COLORS.UTILITY },
      {id: 'b309', points: rectToPolygon({x:350, y:1010, width:150, height:350}), type: 'office', label: 'HOD/Office\nB309', nodeId: 'B309', color: COLORS.ROOM},
      {id: 'b306', points: rectToPolygon({x:350, y:1370, width:150, height:470}), type: 'special', label: 'Seminar Hall\nB306', nodeId: 'B306', color: COLORS.SPECIAL},
      {id: 'b308', points: rectToPolygon({x:700, y:1370, width:250, height:150}), type: 'room', label: 'Store\nB308', nodeId: 'B308', color: COLORS.ROOM},
      {id: 'b307', points: rectToPolygon({x:700, y:1160, width:250, height:200}), type: 'special', label: 'Dept Library\nB307', nodeId: 'B307', color: COLORS.SPECIAL},
      {id: 'b305', points: rectToPolygon({x:700, y:720, width:250, height:150}), type: 'room', label: 'B305', nodeId: 'B305', color: COLORS.ROOM},
      {id: 'b304', points: rectToPolygon({x:700, y:880, width:250, height:130}), type: 'lab', label: 'B304', nodeId: 'B304', color: COLORS.LAB},
      {id: 'b303', points: rectToPolygon({x:700, y:1020, width:250, height:130}), type: 'room', label: 'B303', nodeId: 'B303', color: COLORS.ROOM},
      {id: 'b302', points: rectToPolygon({x:700, y:1530, width:250, height:150}), type: 'room', label: 'B302', nodeId: 'B302', color: COLORS.ROOM},
      {id: 'b301', points: rectToPolygon({x:700, y:1690, width:250, height:150}), type: 'room', label: 'B301', nodeId: 'B301', color: COLORS.ROOM},
    ],
  },
  fourth: {
    id: 'fourth', name: 'Second Floor', level: 2, viewBox: '0 0 1200 2200',
    geometry: [ ...commonGeometry,
      {id: 'f4-main', points: rectToPolygon({x:200, y:200, width:800, height:1800}), type: 'building', color: COLORS.BUILDING},
      {id: 'f4-corridor', points: rectToPolygon({x:550, y:300, width:100, height:1600}), type: 'corridor', color: COLORS.CORRIDOR},
      {id: 'f4-lift', points: rectToPolygon({x:565, y:1000, width:70, height:70}), type: 'lift', label: 'L', nodeId: 'LIFT_F2', color: COLORS.LIFT},
      {id: 'f4-stairs-n', points: rectToPolygon({x:250, y:250, width:250, height:80}), type: 'stairs', label: 'Stairs', nodeId: 'STAIRS_N_F2', color: COLORS.STAIRS},
      {id: 'f4-stairs-s', points: rectToPolygon({x:700, y:1850, width:250, height:80}), type: 'stairs', label: 'Stairs', nodeId: 'STAIRS_S_F2', color: COLORS.STAIRS},
      {id: 'b418', points: rectToPolygon({x:350, y:350, width:150, height:150}), type: 'office', label: 'B418/\nB419', nodeId: 'B418', color: COLORS.ROOM},
      {id: 'b417', points: rectToPolygon({x:350, y:510, width:150, height:150}), type: 'lab', label: 'B417', nodeId: 'B417', color: COLORS.LAB},
      {id: 'b416', points: rectToPolygon({x:350, y:670, width:150, height:150}), type: 'lab', label: 'B416', nodeId: 'B416', color: COLORS.LAB},
      {id: 'b415-gw', points: rectToPolygon({x:350, y:830, width:150, height:80}), type: 'utility', label: 'GW', nodeId: 'B415', color: COLORS.UTILITY },
      {id: 'b414-bw', points: rectToPolygon({x:350, y:920, width:150, height:80}), type: 'utility', label: 'BW', nodeId: 'B414', color: COLORS.UTILITY },
      {id: 'b413', points: rectToPolygon({x:350, y:1010, width:150, height:150}), type: 'lab', label: 'B413', nodeId: 'B413', color: COLORS.LAB},
      {id: 'b412', points: rectToPolygon({x:350, y:1170, width:150, height:150}), type: 'office', label: 'B412', nodeId: 'B412', color: COLORS.ROOM},
      {id: 'b408', points: rectToPolygon({x:350, y:1330, width:150, height:510}), type: 'special', label: 'Seminar\nHall\nB408', nodeId: 'B408', color: COLORS.SPECIAL},
      {id: 'b411', points: rectToPolygon({x:700, y:350, width:250, height:150}), type: 'room', label: 'B411', nodeId: 'B411', color: COLORS.ROOM},
      {id: 'b410', points: rectToPolygon({x:700, y:510, width:250, height:150}), type: 'room', label: 'B410', nodeId: 'B410', color: COLORS.ROOM},
      {id: 'b409', points: rectToPolygon({x:700, y:1330, width:250, height:150}), type: 'room', label: 'B409', nodeId: 'B409', color: COLORS.ROOM},
      {id: 'b407', points: rectToPolygon({x:700, y:350, width:250, height:150}), type: 'room', label: 'B407', nodeId: 'B407', color: COLORS.ROOM},
      {id: 'b406', points: rectToPolygon({x:700, y:510, width:250, height:150}), type: 'room', label: 'B406', nodeId: 'B406', color: COLORS.ROOM},
      {id: 'b405', points: rectToPolygon({x:700, y:670, width:250, height:150}), type: 'lab', label: 'B405', nodeId: 'B405', color: COLORS.LAB},
      {id: 'b404', points: rectToPolygon({x:700, y:830, width:250, height:310}), type: 'lab', label: 'B404A/B', nodeId: 'B404', color: COLORS.LAB},
      {id: 'b403', points: rectToPolygon({x:700, y:1490, width:250, height:150}), type: 'lab', label: 'B403', nodeId: 'B403', color: COLORS.LAB},
      {id: 'b402', points: rectToPolygon({x:700, y:1650, width:250, height:90}), type: 'lab', label: 'B402', nodeId: 'B402', color: COLORS.LAB},
      {id: 'b401', points: rectToPolygon({x:700, y:1750, width:250, height:90}), type: 'room', label: 'B401', nodeId: 'B401', color: COLORS.ROOM},
    ],
  },
  fifth: {
    id: 'fifth', name: 'Third Floor', level: 3, viewBox: '0 0 1200 2200',
    geometry: [ ...commonGeometry,
      {id: 'f5-main', points: rectToPolygon({x:200, y:200, width:800, height:1800}), type: 'building', color: COLORS.BUILDING},
      {id: 'f5-corridor', points: rectToPolygon({x:550, y:300, width:100, height:1600}), type: 'corridor', color: COLORS.CORRIDOR},
      {id: 'f5-lift', points: rectToPolygon({x:565, y:1000, width:70, height:70}), type: 'lift', label: 'L', nodeId: 'LIFT_F3', color: COLORS.LIFT},
      {id: 'f5-stairs-n', points: rectToPolygon({x:250, y:250, width:250, height:80}), type: 'stairs', label: 'Stairs', nodeId: 'STAIRS_N_F3', color: COLORS.STAIRS},
      {id: 'f5-stairs-s', points: rectToPolygon({x:700, y:1850, width:250, height:80}), type: 'stairs', label: 'Stairs', nodeId: 'STAIRS_S_F3', color: COLORS.STAIRS},
      {id: 'b518', points: rectToPolygon({x:350, y:350, width:150, height:150}), type: 'room', label: 'B518', nodeId: 'B518', color: COLORS.ROOM},
      {id: 'b517', points: rectToPolygon({x:350, y:510, width:150, height:150}), type: 'lab', label: 'B517', nodeId: 'B517', color: COLORS.LAB},
      {id: 'b516', points: rectToPolygon({x:350, y:670, width:150, height:150}), type: 'office', label: 'B516', nodeId: 'B516', color: COLORS.ROOM},
      {id: 'b512-gw', points: rectToPolygon({x:350, y:830, width:150, height:80}), type: 'utility', label: 'GW', nodeId: 'B512', color: COLORS.UTILITY },
      {id: 'b511-bw', points: rectToPolygon({x:350, y:920, width:150, height:80}), type: 'utility', label: 'BW', nodeId: 'B511', color: COLORS.UTILITY },
      {id: 'b513', points: rectToPolygon({x:350, y:1010, width:150, height:200}), type: 'office', label: 'Principal\nB513', nodeId: 'B513', color: COLORS.ROOM},
      {id: 'b508', points: rectToPolygon({x:350, y:1220, width:150, height:620}), type: 'special', label: 'Seminar\nHall\nB508', nodeId: 'B508', color: COLORS.SPECIAL},
      {id: 'b519', points: rectToPolygon({x:700, y:430, width:250, height:150}), type: 'lab', label: 'B519', nodeId: 'B519', color: COLORS.LAB},
      {id: 'b509', points: rectToPolygon({x:700, y:1330, width:250, height:150}), type: 'special', label: 'Library\nB509/B510', nodeId: 'B509', color: COLORS.SPECIAL},
      {id: 'b501', points: rectToPolygon({x:700, y:350, width:250, height:70}), type: 'room', label: 'B501', nodeId: 'B501', color: COLORS.ROOM},
      {id: 'b502', points: rectToPolygon({x:700, y:590, width:250, height:150}), type: 'room', label: 'B502', nodeId: 'B502', color: COLORS.ROOM},
      {id: 'b503', points: rectToPolygon({x:700, y:750, width:250, height:150}), type: 'room', label: 'B503', nodeId: 'B503', color: COLORS.ROOM},
      {id: 'b504', points: rectToPolygon({x:700, y:910, width:250, height:150}), type: 'room', label: 'B504', nodeId: 'B504', color: COLORS.ROOM},
      {id: 'b505', points: rectToPolygon({x:700, y:1070, width:250, height:120}), type: 'room', label: 'B505', nodeId: 'B505', color: COLORS.ROOM},
      {id: 'b506', points: rectToPolygon({x:700, y:1490, width:250, height:160}), type: 'room', label: 'B506', nodeId: 'B506', color: COLORS.ROOM},
      {id: 'b507', points: rectToPolygon({x:700, y:1660, width:250, height:180}), type: 'room', label: 'B507', nodeId: 'B507', color: COLORS.ROOM},
    ],
  },
  sixth: {
    id: 'sixth', name: 'Fourth Floor', level: 4, viewBox: '0 0 1200 2200',
    geometry: [ ...commonGeometry,
      {id: 'f6-main', points: rectToPolygon({x:200, y:200, width:800, height:1800}), type: 'building', color: COLORS.BUILDING},
      {id: 'f6-corridor', points: rectToPolygon({x:550, y:300, width:100, height:1600}), type: 'corridor', color: COLORS.CORRIDOR},
      {id: 'f6-lift', points: rectToPolygon({x:565, y:1000, width:70, height:70}), type: 'lift', label: 'L', nodeId: 'LIFT_F4', color: COLORS.LIFT},
      {id: 'f6-stairs-n', points: rectToPolygon({x:250, y:250, width:250, height:80}), type: 'stairs', label: 'Stairs', nodeId: 'STAIRS_N_F4', color: COLORS.STAIRS},
      {id: 'f6-stairs-s', points: rectToPolygon({x:700, y:1850, width:250, height:80}), type: 'stairs', label: 'Stairs', nodeId: 'STAIRS_S_F4', color: COLORS.STAIRS},
      {id: 'badminton', points: rectToPolygon({x:250, y:350, width:700, height:500}), type: 'special', label: 'Badminton Court', nodeId: 'BADMINTON_COURT', color: COLORS.SPECIAL},
      {id: 'b605', points: rectToPolygon({x:350, y:860, width:150, height:350}), type: 'lab', label: 'B605+\nLabs', nodeId: 'B605', color: COLORS.LAB},
      {id: 'b607-gw', points: rectToPolygon({x:700, y:1400, width:250, height:80}), type: 'utility', label: 'GW', nodeId: 'B607', color: COLORS.UTILITY },
      {id: 'b606-bw', points: rectToPolygon({x:700, y:1490, width:250, height:80}), type: 'utility', label: 'BW', nodeId: 'B606', color: COLORS.UTILITY },
      {id: 'b603', points: rectToPolygon({x:700, y:860, width:250, height:150}), type: 'room', label: 'B603', nodeId: 'B603', color: COLORS.ROOM},
      {id: 'b602', points: rectToPolygon({x:700, y:1020, width:250, height:150}), type: 'room', label: 'B602', nodeId: 'B602', color: COLORS.ROOM},
      {id: 'b601', points: rectToPolygon({x:700, y:1180, width:250, height:150}), type: 'room', label: 'B601', nodeId: 'B601', color: COLORS.ROOM},
    ],
  },
};

export const nodes: Record<string, MapNode> = {
  // --- Corridor Nodes (Hubs) ---
  'ENTRANCE': {id: 'ENTRANCE', name: 'Main Entrance / Reception', floor: 'second', type: 'entrance', coordinates: {x: 600, y: 1950}, aliases: ['start', 'main door', 'reception', 'B204']},
  'C_B2_S': {id: 'C_B2_S', name: 'Corridor B2 South', floor: 'basement', type: 'corridor', coordinates: {x: 600, y: 1700}},
  'C_B2_M': {id: 'C_B2_M', name: 'Corridor B2 Middle', floor: 'basement', type: 'corridor', coordinates: {x: 600, y: 1100}},
  'C_B2_N': {id: 'C_B2_N', name: 'Corridor B2 North', floor: 'basement', type: 'corridor', coordinates: {x: 600, y: 400}},
  'C_B1_S': {id: 'C_B1_S', name: 'Corridor B1 South', floor: 'first', type: 'corridor', coordinates: {x: 600, y: 1700}},
  'C_B1_M': {id: 'C_B1_M', name: 'Corridor B1 Middle', floor: 'first', type: 'corridor', coordinates: {x: 600, y: 1100}},
  'C_B1_N': {id: 'C_B1_N', name: 'Corridor B1 North', floor: 'first', type: 'corridor', coordinates: {x: 600, y: 400}},
  'C_G_S': {id: 'C_G_S', name: 'Corridor G South', floor: 'second', type: 'corridor', coordinates: {x: 600, y: 1700}},
  'C_G_M': {id: 'C_G_M', name: 'Corridor G Middle', floor: 'second', type: 'corridor', coordinates: {x: 600, y: 1100}},
  'C_G_N': {id: 'C_G_N', name: 'Corridor G North', floor: 'second', type: 'corridor', coordinates: {x: 600, y: 400}},
  'C_F1_S': {id: 'C_F1_S', name: 'Corridor F1 South', floor: 'third', type: 'corridor', coordinates: {x: 600, y: 1700}},
  'C_F1_M': {id: 'C_F1_M', name: 'Corridor F1 Middle', floor: 'third', type: 'corridor', coordinates: {x: 600, y: 1100}},
  'C_F1_N': {id: 'C_F1_N', name: 'Corridor F1 North', floor: 'third', type: 'corridor', coordinates: {x: 600, y: 400}},
  'C_F2_S': {id: 'C_F2_S', name: 'Corridor F2 South', floor: 'fourth', type: 'corridor', coordinates: {x: 600, y: 1700}},
  'C_F2_M': {id: 'C_F2_M', name: 'Corridor F2 Middle', floor: 'fourth', type: 'corridor', coordinates: {x: 600, y: 1100}},
  'C_F2_N': {id: 'C_F2_N', name: 'Corridor F2 North', floor: 'fourth', type: 'corridor', coordinates: {x: 600, y: 400}},
  'C_F3_S': {id: 'C_F3_S', name: 'Corridor F3 South', floor: 'fifth', type: 'corridor', coordinates: {x: 600, y: 1700}},
  'C_F3_M': {id: 'C_F3_M', name: 'Corridor F3 Middle', floor: 'fifth', type: 'corridor', coordinates: {x: 600, y: 1100}},
  'C_F3_N': {id: 'C_F3_N', name: 'Corridor F3 North', floor: 'fifth', type: 'corridor', coordinates: {x: 600, y: 400}},
  'C_F4_S': {id: 'C_F4_S', name: 'Corridor F4 South', floor: 'sixth', type: 'corridor', coordinates: {x: 600, y: 1700}},
  'C_F4_M': {id: 'C_F4_M', name: 'Corridor F4 Middle', floor: 'sixth', type: 'corridor', coordinates: {x: 600, y: 1100}},
  'C_F4_N': {id: 'C_F4_N', name: 'Corridor F4 North', floor: 'sixth', type: 'corridor', coordinates: {x: 600, y: 400}},

  // --- Vertical Travel Nodes ---
  'LIFT_B2': {id: 'LIFT_B2', name: 'Lift', floor: 'basement', type: 'lift', coordinates: {x: 600, y: 1035}},
  'LIFT_B1': {id: 'LIFT_B1', name: 'Lift', floor: 'first', type: 'lift', coordinates: {x: 600, y: 1035}},
  'LIFT_G': {id: 'LIFT_G', name: 'Lift', floor: 'second', type: 'lift', coordinates: {x: 600, y: 1035}},
  'LIFT_F1': {id: 'LIFT_F1', name: 'Lift', floor: 'third', type: 'lift', coordinates: {x: 600, y: 1035}},
  'LIFT_F2': {id: 'LIFT_F2', name: 'Lift', floor: 'fourth', type: 'lift', coordinates: {x: 600, y: 1035}},
  'LIFT_F3': {id: 'LIFT_F3', name: 'Lift', floor: 'fifth', type: 'lift', coordinates: {x: 600, y: 1035}},
  'LIFT_F4': {id: 'LIFT_F4', name: 'Lift', floor: 'sixth', type: 'lift', coordinates: {x: 600, y: 1035}},
  'STAIRS_N_B2': {id: 'STAIRS_N_B2', name: 'North Stairs', floor: 'basement', type: 'stairs', coordinates: {x: 525, y: 290}},
  'STAIRS_N_B1': {id: 'STAIRS_N_B1', name: 'North Stairs', floor: 'first', type: 'stairs', coordinates: {x: 525, y: 290}},
  'STAIRS_N_G': {id: 'STAIRS_N_G', name: 'North Stairs', floor: 'second', type: 'stairs', coordinates: {x: 525, y: 290}},
  'STAIRS_N_F1': {id: 'STAIRS_N_F1', name: 'North Stairs', floor: 'third', type: 'stairs', coordinates: {x: 525, y: 290}},
  'STAIRS_N_F2': {id: 'STAIRS_N_F2', name: 'North Stairs', floor: 'fourth', type: 'stairs', coordinates: {x: 525, y: 290}},
  'STAIRS_N_F3': {id: 'STAIRS_N_F3', name: 'North Stairs', floor: 'fifth', type: 'stairs', coordinates: {x: 525, y: 290}},
  'STAIRS_N_F4': {id: 'STAIRS_N_F4', name: 'North Stairs', floor: 'sixth', type: 'stairs', coordinates: {x: 525, y: 290}},
  'STAIRS_S_B2': {id: 'STAIRS_S_B2', name: 'South Stairs', floor: 'basement', type: 'stairs', coordinates: {x: 675, y: 1890}},
  'STAIRS_S_B1': {id: 'STAIRS_S_B1', name: 'South Stairs', floor: 'first', type: 'stairs', coordinates: {x: 675, y: 1890}},
  'STAIRS_S_G': {id: 'STAIRS_S_G', name: 'South Stairs', floor: 'second', type: 'stairs', coordinates: {x: 675, y: 1890}},
  'STAIRS_S_F1': {id: 'STAIRS_S_F1', name: 'South Stairs', floor: 'third', type: 'stairs', coordinates: {x: 675, y: 1890}},
  'STAIRS_S_F2': {id: 'STAIRS_S_F2', name: 'South Stairs', floor: 'fourth', type: 'stairs', coordinates: {x: 675, y: 1890}},
  'STAIRS_S_F3': {id: 'STAIRS_S_F3', name: 'South Stairs', floor: 'fifth', type: 'stairs', coordinates: {x: 675, y: 1890}},
  'STAIRS_S_F4': {id: 'STAIRS_S_F4', name: 'South Stairs', floor: 'sixth', type: 'stairs', coordinates: {x: 675, y: 1890}},

  // --- Room/Special Nodes (Destinations) ---
  // Basement 2 (Code: basement)
  'B001': {id: 'B001', name: 'Structural Engineering Laboratory', floor: 'basement', type: 'lab', coordinates: {x: 825, y: 1770}, aliases: ['B001']},
  'B002': {id: 'B002', name: 'Concrete & Highway Material Testing Laboratory', floor: 'basement', type: 'lab', coordinates: {x: 825, y: 1605}, aliases: ['B002', 'Centre of Excellence']},
  'B003': {id: 'B003', name: 'Research Centre Mechanical Engineering', floor: 'basement', type: 'lab', coordinates: {x: 825, y: 1025}, aliases: ['B003']},
  'B004': {id: 'B004', name: 'Geotechnology Engineering Laboratory', floor: 'basement', type: 'lab', coordinates: {x: 825, y: 885}, aliases: ['B004']},
  'B005': {id: 'B005', name: 'Basic Material Testing Laboratory', floor: 'basement', type: 'lab', coordinates: {x: 825, y: 395}, aliases: ['B005', 'Tutorial Room-1']},
  'B006': {id: 'B006', name: 'Machine Shop', floor: 'basement', type: 'lab', coordinates: {x: 825, y: 1410}, aliases: ['B006']},
  'B007': {id: 'B007', name: 'Store Room Mechanical Engineering', floor: 'basement', type: 'room', coordinates: {x: 825, y: 1200}, aliases: ['B007']},
  'B008': {id: 'B008', name: 'Electrical Machines Laboratory', floor: 'basement', type: 'lab', coordinates: {x: 825, y: 710}, aliases: ['B008']},
  'B009': {id: 'B009', name: 'Electrical Machines Laboratory', floor: 'basement', type: 'lab', coordinates: {x: 825, y: 525}, aliases: ['B009']}, // Not in directory, assuming part of B008
  'B011': {id: 'B011', name: 'Metallographic & Material Testing Laboratory', floor: 'basement', type: 'lab', coordinates: {x: 425, y: 1765}, aliases: ['B011']},
  'B012': {id: 'B012', name: 'Energy Conversion Lab', floor: 'basement', type: 'lab', coordinates: {x: 425, y: 1555}, aliases: ['B012']},
  'B013': {id: 'B013', name: 'Workshop Practice', floor: 'basement', type: 'lab', coordinates: {x: 425, y: 1295}, aliases: ['B013']},
  'B014': {id: 'B014', name: 'Boys Toilet', floor: 'basement', type: 'utility', coordinates: {x: 425, y: 1120}, aliases: ['B014']},
  'B015': {id: 'B015', name: 'Girls Toilet', floor: 'basement', type: 'utility', coordinates: {x: 425, y: 860}, aliases: ['B015']}, // Not in directory, inferred
  'B016': {id: 'B016', name: 'Relay and High Voltage Laboratory', floor: 'basement', type: 'lab', coordinates: {x: 425, y: 740}, aliases: ['B016']},
  'B017': {id: 'B017', name: 'Foundry & Forging Laboratory', floor: 'basement', type: 'lab', coordinates: {x: 425, y: 585}, aliases: ['B017']},
  'B018': {id: 'B018', name: 'Research Centre Mechanical Engineering', floor: 'basement', type: 'lab', coordinates: {x: 425, y: 425}, aliases: ['B018']},

  // Basement 1 (Code: first)
  'B101': {id: 'B101', name: 'Computer Aided Modeling And Analysis Lab', floor: 'first', type: 'lab', coordinates: {x: 825, y: 1760}, aliases: ['B101', 'CIM Lab', 'Computer Integrated Manufacturing Lab']},
  'B102': {id: 'B102', name: 'Class Room III/IV Sem', floor: 'first', type: 'room', coordinates: {x: 825, y: 1600}, aliases: ['B102']},
  'B103': {id: 'B103', name: 'Class Room V/VI Sem', floor: 'first', type: 'room', coordinates: {x: 825, y: 1280}, aliases: ['B103']},
  'B104': {id: 'B104', name: 'Class Room I/II sem', floor: 'first', type: 'room', coordinates: {x: 825, y: 1115}, aliases: ['B104']},
  'B105': {id: 'B105', name: 'Class Room VII/VIII Sem', floor: 'first', type: 'room', coordinates: {x: 825, y: 745}, aliases: ['B105']},
  'B106': {id: 'B106', name: 'Tutorial Room 1', floor: 'first', type: 'room', coordinates: {x: 825, y: 585}, aliases: ['B106']},
  'B107': {id: 'B107', name: 'Tutorial Room 2', floor: 'first', type: 'room', coordinates: {x: 825, y: 425}, aliases: ['B107']},
  'B108': {id: 'B108', name: 'Computer Aided Engineering Drawing', floor: 'first', type: 'lab', coordinates: {x: 825, y: 425}, aliases: ['B108']}, // Shared with B107
  'B109': {id: 'B109', name: 'Computer Aided Machine Drawing', floor: 'first', type: 'lab', coordinates: {x: 825, y: 1440}, aliases: ['B109']},
  'B110': {id: 'B110', name: 'Tutorial Room', floor: 'first', type: 'room', coordinates: {x: 825, y: 1280}, aliases: ['B110']}, // Shared with B103
  'B111': {id: 'B111', name: 'Tutorial Room 2', floor: 'first', type: 'room', coordinates: {x: 825, y: 745}, aliases: ['B111']}, // Shared with B105
  'B112': {id: 'B112', name: 'Design Lab', floor: 'first', type: 'lab', coordinates: {x: 825, y: 585}, aliases: ['B112']},
  'B113': {id: 'B113', name: 'Engineering Geology Laboratory', floor: 'first', type: 'lab', coordinates: {x: 825, y: 425}, aliases: ['B113']},
  'B114': {id: 'B114', name: 'Reading Room', floor: 'first', type: 'room', coordinates: {x: 425, y: 1755}, aliases: ['B114']},
  'B115': {id: 'B115', name: 'Staff Room', floor: 'first', type: 'office', coordinates: {x: 425, y: 1440}, aliases: ['B115']},
  'B116': {id: 'B116', name: 'Head of the Department Chamber & Office', floor: 'first', type: 'office', coordinates: {x: 425, y: 1105}, aliases: ['B116', 'HOD office', 'B116A', 'B116B', 'Department Office']},
  'B117': {id: 'B117', name: 'Boys Toilet', floor: 'first', type: 'utility', coordinates: {x: 425, y: 960}, aliases: ['B117']},
  'B118': {id: 'B118', name: 'Girls Toilet', floor: 'first', type: 'utility', coordinates: {x: 425, y: 870}, aliases: ['B118']},
  'B119': {id: 'B119', name: 'Mechanical Measurement & Metrology Lab', floor: 'first', type: 'lab', coordinates: {x: 375, y: 745}, aliases: ['B119']},
  'B120': {id: 'B120', name: 'Fluid Mechanics & Machinery Lab', floor: 'first', type: 'lab', coordinates: {x: 375, y: 585}, aliases: ['B120']},
  'B121': {id: 'B121', name: 'Heat & Mass Transfer Lab', floor: 'first', type: 'lab', coordinates: {x: 375, y: 425}, aliases: ['B121']},
  
  // Ground Floor (Code: second)
  'CANTEEN': {id: 'CANTEEN', name: 'Canteen', floor: 'second', type: 'special', coordinates: {x: 825, y: 760}, aliases: ['food', 'cafeteria', 'snacks', 'restaurant']},
  'B201': {id: 'B201', name: "Class Room VII/VIII 'A'", floor: 'second', type: 'room', coordinates: {x: 825, y: 1740}, aliases: ['B201']},
  'B202': {id: 'B202', name: "Class Room V/VI 'B'", floor: 'second', type: 'room', coordinates: {x: 825, y: 1535}, aliases: ['B202']},
  'B203': {id: 'B203', name: "Class Room V/VI 'A'", floor: 'second', type: 'room', coordinates: {x: 825, y: 1080}, aliases: ['B203']},
  'B205': {id: 'B205', name: 'Data Intelligence Lab', floor: 'second', type: 'lab', coordinates: {x: 825, y: 925}, aliases: ['B205']},
  'B206': {id: 'B206', name: 'Synergy Lab', floor: 'second', type: 'lab', coordinates: {x: 825, y: 585}, aliases: ['B206']},
  'B207': {id: 'B207', name: 'Skill/Project Lab', floor: 'second', type: 'lab', coordinates: {x: 825, y: 425}, aliases: ['B207']},
  'B208': {id: 'B208', name: 'Seminar Hall (A-Alpha D-Delta)', floor: 'second', type: 'special', coordinates: {x: 425, y: 1585}, aliases: ['seminar hall', 'alpha delta hall', 'B208', 'Seminer Hall']},
  'B209': {id: 'B209', name: "Class Room VII/VIII 'B'", floor: 'second', type: 'room', coordinates: {x: 825, y: 1245}, aliases: ['B209']},
  'B210': {id: 'B210', name: 'Smart Library', floor: 'second', type: 'special', coordinates: {x: 825, y: 1380}, aliases: ['B210']},
  'B211': {id: 'B211', name: 'Department (HOD/Office/Staffroom)', floor: 'second', type: 'office', coordinates: {x: 425, y: 1220}, aliases: ['B211']},
  'B211A': {id: 'B211A', name: 'Department Office', floor: 'second', type: 'office', coordinates: {x: 425, y: 1060}, aliases: ['B211A']},
  'B212': {id: 'B212', name: 'Boys Toilet', floor: 'second', type: 'utility', coordinates: {x: 425, y: 960}, aliases: ['B212']},
  'B213': {id: 'B213', name: 'Girls Toilet', floor: 'second', type: 'utility', coordinates: {x: 425, y: 870}, aliases: ['B213']},
  'B214': {id: 'B214', name: 'Turing Lab', floor: 'second', type: 'lab', coordinates: {x: 375, y: 585}, aliases: ['B214']},
  'B215': {id: 'B215', name: 'Centre of Excellence', floor: 'second', type: 'lab', coordinates: {x: 375, y: 425}, aliases: ['B215']},
  'B216': {id: 'B216', name: 'Faculty 2 / Strong Room', floor: 'second', type: 'office', coordinates: {x: 825, y: 585}, aliases: ['B216', 'B216b', 'Strong Room']},
  'B217': {id: 'B217', name: 'Next Gen Lab', floor: 'second', type: 'lab', coordinates: {x: 825, y: 425}, aliases: ['B217']},
  'B218': {id: 'B218', name: "Class Room III/IV 'A'", floor: 'second', type: 'room', coordinates: {x: 425, y: 707}, aliases: ['B218']},
  'B219': {id: 'B219', name: "Class Room III/IV 'B'", floor: 'second', type: 'room', coordinates: {x: 425, y: 787}, aliases: ['B219']},
  
  // First Floor (Code: third)
  'B301': {id: 'B301', name: "Class Room VII/VIII 'A'", floor: 'third', type: 'room', coordinates: {x: 825, y: 1765}, aliases: ['B301']},
  'B302': {id: 'B302', name: "Class Room V/VI 'A'", floor: 'third', type: 'room', coordinates: {x: 825, y: 1610}, aliases: ['B302']},
  'B303': {id: 'B303', name: "Class Room III/IV 'A'", floor: 'third', type: 'room', coordinates: {x: 825, y: 1095}, aliases: ['B303']},
  'B304': {id: 'B304', name: 'Research Center Civil Engineering', floor: 'third', type: 'lab', coordinates: {x: 825, y: 955}, aliases: ['B304']},
  'B305': {id: 'B305', name: 'Reading Room 2', floor: 'third', type: 'room', coordinates: {x: 825, y: 795}, aliases: ['B305']},
  'B306': {id: 'B306', name: 'Seminar Hall Civil Engineering', floor: 'third', type: 'special', coordinates: {x: 425, y: 1605}, aliases: ['B306', 'seminar hall']},
  'B307': {id: 'B307', name: 'Department Library Civil Engineering', floor: 'third', type: 'special', coordinates: {x: 825, y: 1260}, aliases: ['B307']},
  'B308': {id: 'B308', name: 'Store Room', floor: 'third', type: 'room', coordinates: {x: 825, y: 1450}, aliases: ['B308']},
  'B309': {id: 'B309', name: 'Department (HOD/Office/Staffroom)', floor: 'third', type: 'office', coordinates: {x: 425, y: 1185}, aliases: ['B309']},
  'B310': {id: 'B310', name: 'Boys Toilet', floor: 'third', type: 'utility', coordinates: {x: 425, y: 960}, aliases: ['B310']},
  'B311': {id: 'B311', name: 'Girls Toilet', floor: 'third', type: 'utility', coordinates: {x: 425, y: 870}, aliases: ['B311']},
  'B312': {id: 'B312', name: 'IQAC Room', floor: 'third', type: 'office', coordinates: {x: 425, y: 745}, aliases: ['B312']},
  'B313': {id: 'B313', name: 'Library & Information Centre', floor: 'third', type: 'special', coordinates: {x: 375, y: 700}, aliases: ['library', 'main library', 'information centre', 'Libiray']},
  'B314': {id: 'B314', name: 'Reading Room 1', floor: 'third', type: 'special', coordinates: {x: 825, y: 425}, aliases: ['Digital Library']},
  'STUDY_AREA': {id: 'STUDY_AREA', name: 'Study Area', floor: 'third', type: 'room', coordinates: {x: 825, y: 610}, aliases: []},

  // Second Floor (Code: fourth)
  'B401': {id: 'B401', name: 'Tutorial', floor: 'fourth', type: 'room', coordinates: {x: 825, y: 1800}, aliases: ['B401']},
  'B402': {id: 'B402', name: 'Tutorial/Commn. Lab', floor: 'fourth', type: 'lab', coordinates: {x: 825, y: 1695}, aliases: ['B402']},
  'B403': {id: 'B403', name: 'CSBS Project Lab', floor: 'fourth', type: 'lab', coordinates: {x: 825, y: 1570}, aliases: ['B403']},
  'B404': {id: 'B404', name: 'ECE Lab', floor: 'fourth', type: 'lab', coordinates: {x: 825, y: 985}, aliases: ['B404A', 'B404B', 'Electronics and Communication Lab']},
  'B405': {id: 'B405', name: 'Tutorial/IIOT Lab', floor: 'fourth', type: 'lab', coordinates: {x: 825, y: 745}, aliases: ['B405']},
  'B406': {id: 'B406', name: 'Common Room', floor: 'fourth', type: 'room', coordinates: {x: 825, y: 585}, aliases: ['B406']},
  'B407': {id: 'B407', name: 'Common Room', floor: 'fourth', type: 'room', coordinates: {x: 825, y: 425}, aliases: ['B407']},
  'B408': {id: 'B408', name: 'Seminar/Drawing Hall', floor: 'fourth', type: 'special', coordinates: {x: 425, y: 1585}, aliases: ['B408', 'seminar hall', 'drawing hall']},
  'B409': {id: 'B409', name: 'CSBS Class Room', floor: 'fourth', type: 'room', coordinates: {x: 825, y: 1405}, aliases: ['B409']},
  'B410': {id: 'B410', name: 'Class Room', floor: 'fourth', type: 'room', coordinates: {x: 825, y: 585}, aliases: ['B410']},
  'B411': {id: 'B411', name: 'Class Room', floor: 'fourth', type: 'room', coordinates: {x: 825, y: 425}, aliases: ['B411']},
  'B412': {id: 'B412', name: 'Staff Room, K S Polytechnic', floor: 'fourth', type: 'office', coordinates: {x: 425, y: 1245}, aliases: ['B412']},
  'B413': {id: 'B413', name: 'Computer Centre', floor: 'fourth', type: 'lab', coordinates: {x: 425, y: 1085}, aliases: ['B413']},
  'B414': {id: 'B414', name: 'Boys Toilet', floor: 'fourth', type: 'utility', coordinates: {x: 425, y: 960}, aliases: ['B414']},
  'B415': {id: 'B415', name: 'Girls Toilet', floor: 'fourth', type: 'utility', coordinates: {x: 425, y: 870}, aliases: ['B415']},
  'B416': {id: 'B416', name: 'Language Lab', floor: 'fourth', type: 'lab', coordinates: {x: 425, y: 745}, aliases: ['B416']},
  'B417': {id: 'B417', name: 'CSBS Lab', floor: 'fourth', type: 'lab', coordinates: {x: 425, y: 585}, aliases: ['B417', 'B417A', 'B417B']},
  'B418': {id: 'B418', name: 'CSBS Department (HOD/Office/Staffroom)', floor: 'fourth', type: 'office', coordinates: {x: 425, y: 425}, aliases: ['B418', 'B419']},

  // Third Floor (Code: fifth)
  'B501': {id: 'B501', name: 'Class Room', floor: 'fifth', type: 'room', coordinates: {x: 825, y: 385}, aliases: ['B501']},
  'B502': {id: 'B502', name: 'Class Room', floor: 'fifth', type: 'room', coordinates: {x: 825, y: 665}, aliases: ['B502']},
  'B503': {id: 'B503', name: 'Class Room', floor: 'fifth', type: 'room', coordinates: {x: 825, y: 825}, aliases: ['B503']},
  'B504': {id: 'B504', name: 'Class Room', floor: 'fifth', type: 'room', coordinates: {x: 825, y: 985}, aliases: ['B504']},
  'B505': {id: 'B505', name: 'Class Room', floor: 'fifth', type: 'room', coordinates: {x: 825, y: 1130}, aliases: ['B505']},
  'B506': {id: 'B506', name: 'Class Room', floor: 'fifth', type: 'room', coordinates: {x: 825, y: 1570}, aliases: ['B506']},
  'B507': {id: 'B507', name: 'Class Room', floor: 'fifth', type: 'room', coordinates: {x: 825, y: 1750}, aliases: ['B507']},
  'B508': {id: 'B508', name: 'Seminar Hall', floor: 'fifth', type: 'special', coordinates: {x: 425, y: 1530}, aliases: ['B508', 'seminar hall']},
  'B509': {id: 'B509', name: 'Library', floor: 'fifth', type: 'special', coordinates: {x: 825, y: 1405}, aliases: ['B509', 'B510']},
  'B511': {id: 'B511', name: 'Boys Toilet', floor: 'fifth', type: 'utility', coordinates: {x: 425, y: 960}, aliases: ['B511']},
  'B512': {id: 'B512', name: 'Girls Toilet', floor: 'fifth', type: 'utility', coordinates: {x: 425, y: 870}, aliases: ['B512']},
  'B513': {id: 'B513', name: 'Principal/Office, K S Polytechnic', floor: 'fifth', type: 'office', coordinates: {x: 425, y: 1110}, aliases: ['B513', 'Principal Office']},
  'B514': {id: 'B514', name: 'Computer Centre, K S Polytechnic', floor: 'fifth', type: 'lab', coordinates: {x: 425, y: 585}, aliases: ['B514']},
  'B515': {id: 'B515', name: 'Computer Centre, K S Polytechnic', floor: 'fifth', type: 'lab', coordinates: {x: 425, y: 585}, aliases: ['B515']},
  'B516': {id: 'B516', name: 'HOD/Staff Room, K S Polytechnic', floor: 'fifth', type: 'office', coordinates: {x: 425, y: 745}, aliases: ['B516']},
  'B517': {id: 'B517', name: 'Computer Centre, K S Polytechnic', floor: 'fifth', type: 'lab', coordinates: {x: 425, y: 585}, aliases: ['B517', 'computer lab', 'B517A', 'B517B']},
  'B518': {id: 'B518', name: 'Class Room', floor: 'fifth', type: 'room', coordinates: {x: 425, y: 425}, aliases: ['B518A', 'B518B']},
  'B519': {id: 'B519', name: 'Lab', floor: 'fifth', type: 'lab', coordinates: {x: 825, y: 505}, aliases: ['B519A', 'B519B']},
  
  // Fourth Floor (Code: sixth)
  'B601': {id: 'B601', name: 'Class Room', floor: 'sixth', type: 'room', coordinates: {x: 825, y: 1255}, aliases: ['B601']},
  'B602': {id: 'B602', name: 'Class Room', floor: 'sixth', type: 'room', coordinates: {x: 825, y: 1095}, aliases: ['B602']},
  'B603': {id: 'B603', name: 'Class Room', floor: 'sixth', type: 'room', coordinates: {x: 825, y: 935}, aliases: ['B603']},
  'B604': {id: 'B604', name: 'Class Room', floor: 'sixth', type: 'room', coordinates: {x: 825, y: 1255}, aliases: ['B604']}, // Duplicate of B601 in directory
  'B605': {id: 'B605', name: 'Electrical Lab', floor: 'sixth', type: 'lab', coordinates: {x: 425, y: 1035}, aliases: ['B605']},
  'B606': {id: 'B606', name: 'Boys Toilet', floor: 'sixth', type: 'utility', coordinates: {x: 825, y: 1530}, aliases: ['B606']},
  'B607': {id: 'B607', name: 'Girls Toilet', floor: 'sixth', type: 'utility', coordinates: {x: 825, y: 1440}, aliases: ['B607']},
  'B608': {id: 'B608', name: 'Electrical Lab', floor: 'sixth', type: 'lab', coordinates: {x: 425, y: 1035}, aliases: ['B608']},
  'B609': {id: 'B609', name: 'Electrical Lab', floor: 'sixth', type: 'lab', coordinates: {x: 425, y: 1035}, aliases: ['B609']},
  'B610': {id: 'B610', name: 'Electrical Lab', floor: 'sixth', type: 'lab', coordinates: {x: 425, y: 1035}, aliases: ['B610']},
  'BADMINTON_COURT': {id: 'BADMINTON_COURT', name: 'Badminton Court', floor: 'sixth', type: 'special', coordinates: {x: 600, y: 600}, aliases: ['sports']},
};

export const edges: MapEdge[] = [
  // --- Corridor Connections ---
  {source: 'ENTRANCE', target: 'C_G_S', weight: 25},
  {source: 'C_B2_S', target: 'C_B2_M', weight: 60}, {source: 'C_B2_M', target: 'C_B2_N', weight: 70},
  {source: 'C_B1_S', target: 'C_B1_M', weight: 60}, {source: 'C_B1_M', target: 'C_B1_N', weight: 70},
  {source: 'C_G_S', target: 'C_G_M', weight: 60}, {source: 'C_G_M', target: 'C_G_N', weight: 70},
  {source: 'C_F1_S', target: 'C_F1_M', weight: 60}, {source: 'C_F1_M', target: 'C_F1_N', weight: 70},
  {source: 'C_F2_S', target: 'C_F2_M', weight: 60}, {source: 'C_F2_M', target: 'C_F2_N', weight: 70},
  {source: 'C_F3_S', target: 'C_F3_M', weight: 60}, {source: 'C_F3_M', target: 'C_F3_N', weight: 70},
  {source: 'C_F4_S', target: 'C_F4_M', weight: 60}, {source: 'C_F4_M', target: 'C_F4_N', weight: 70},

  // --- Vertical Connections ---
  {source: 'C_B2_S', target: 'STAIRS_S_B2', weight: 20}, {source: 'C_B1_S', target: 'STAIRS_S_B1', weight: 20}, {source: 'C_G_S', target: 'STAIRS_S_G', weight: 20}, {source: 'C_F1_S', target: 'STAIRS_S_F1', weight: 20}, {source: 'C_F2_S', target: 'STAIRS_S_F2', weight: 20}, {source: 'C_F3_S', target: 'STAIRS_S_F3', weight: 20}, {source: 'C_F4_S', target: 'STAIRS_S_F4', weight: 20},
  {source: 'C_B2_N', target: 'STAIRS_N_B2', weight: 20}, {source: 'C_B1_N', target: 'STAIRS_N_B1', weight: 20}, {source: 'C_G_N', target: 'STAIRS_N_G', weight: 20}, {source: 'C_F1_N', target: 'STAIRS_N_F1', weight: 20}, {source: 'C_F2_N', target: 'STAIRS_N_F2', weight: 20}, {source: 'C_F3_N', target: 'STAIRS_N_F3', weight: 20}, {source: 'C_F4_N', target: 'STAIRS_N_F4', weight: 20},
  {source: 'C_B2_M', target: 'LIFT_B2', weight: 5}, {source: 'C_B1_M', target: 'LIFT_B1', weight: 5}, {source: 'C_G_M', target: 'LIFT_G', weight: 5}, {source: 'C_F1_M', target: 'LIFT_F1', weight: 5}, {source: 'C_F2_M', target: 'LIFT_F2', weight: 5}, {source: 'C_F3_M', target: 'LIFT_F3', weight: 5}, {source: 'C_F4_M', target: 'LIFT_F4', weight: 5},
  
  // Auto-connect all rooms to their nearest corridor junction
  ...Object.values(nodes)
    .filter(node => ['room', 'special', 'lab', 'office', 'utility'].includes(node.type))
    .map(roomNode => {
        const corridorNodes = Object.values(nodes).filter(n => n.floor === roomNode.floor && n.type === 'corridor');
        if (corridorNodes.length === 0) return null;
        let nearestCorridorNode = corridorNodes[0];
        let minDistance = Infinity;
        corridorNodes.forEach(corridorNode => {
            const dist = Math.hypot(roomNode.coordinates.x - corridorNode.coordinates.x, roomNode.coordinates.y - corridorNode.coordinates.y);
            if (dist < minDistance) {
                minDistance = dist;
                nearestCorridorNode = corridorNode;
            }
        });
        return { source: roomNode.id, target: nearestCorridorNode.id, weight: Math.round(minDistance / 10) };
    }).filter(e => e !== null) as MapEdge[],

  // --- VERTICAL EDGES (STAIRS) ---
  {source: 'STAIRS_N_B2', target: 'STAIRS_N_B1', weight: 20}, {source: 'STAIRS_N_B1', target: 'STAIRS_N_B2', weight: 20},
  {source: 'STAIRS_N_B1', target: 'STAIRS_N_G', weight: 20}, {source: 'STAIRS_N_G', target: 'STAIRS_N_B1', weight: 20},
  {source: 'STAIRS_N_G', target: 'STAIRS_N_F1', weight: 20}, {source: 'STAIRS_N_F1', target: 'STAIRS_N_G', weight: 20},
  {source: 'STAIRS_N_F1', target: 'STAIRS_N_F2', weight: 20}, {source: 'STAIRS_N_F2', target: 'STAIRS_N_F1', weight: 20},
  {source: 'STAIRS_N_F2', target: 'STAIRS_N_F3', weight: 20}, {source: 'STAIRS_N_F3', target: 'STAIRS_N_F2', weight: 20},
  {source: 'STAIRS_N_F3', target: 'STAIRS_N_F4', weight: 20}, {source: 'STAIRS_N_F4', target: 'STAIRS_N_F3', weight: 20},
  {source: 'STAIRS_S_B2', target: 'STAIRS_S_B1', weight: 20}, {source: 'STAIRS_S_B1', target: 'STAIRS_S_B2', weight: 20},
  {source: 'STAIRS_S_B1', target: 'STAIRS_S_G', weight: 20}, {source: 'STAIRS_S_G', target: 'STAIRS_S_B1', weight: 20},
  {source: 'STAIRS_S_G', target: 'STAIRS_S_F1', weight: 20}, {source: 'STAIRS_S_F1', target: 'STAIRS_S_G', weight: 20},
  {source: 'STAIRS_S_F1', target: 'STAIRS_S_F2', weight: 20}, {source: 'STAIRS_S_F2', target: 'STAIRS_S_F1', weight: 20},
  {source: 'STAIRS_S_F2', target: 'STAIRS_S_F3', weight: 20}, {source: 'STAIRS_S_F3', target: 'STAIRS_S_F2', weight: 20},
  {source: 'STAIRS_S_F3', target: 'STAIRS_S_F4', weight: 20}, {source: 'STAIRS_S_F4', target: 'STAIRS_S_F3', weight: 20},

  // --- VERTICAL EDGES (LIFT) ---
  ...(() => {
    const liftEdges: MapEdge[] = [];
    const liftNodes = Object.values(nodes).filter(n => n.type === 'lift');
    for (let i = 0; i < liftNodes.length; i++) {
        for (let j = i + 1; j < liftNodes.length; j++) {
            liftEdges.push({ source: liftNodes[i].id, target: liftNodes[j].id, weight: 15 });
            liftEdges.push({ source: liftNodes[j].id, target: liftNodes[i].id, weight: 15 });
        }
    }
    return liftEdges;
  })(),
];